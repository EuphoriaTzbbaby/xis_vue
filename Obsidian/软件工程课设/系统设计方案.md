# 系统设计方案：E-learning系统

## 系统概述

本系统是一个基于 Element Plus 的教育管理平台，支持电脑和手机端自适应，使用独立数据库，满足管理员、教师和学生三类用户的需求。系统目标是提升学校管理效率，支持课程管理、资源共享和师生互动。

## 系统架构

### 总体架构

- **前端**：Vue 3 + Element Plus，负责界面展示和用户交互。
- **后端**：Springboot，提供 RESTful API 处理业务逻辑。
- **数据库**：MySQL，存储结构化数据。
- **文件存储**：本地文件系统或云存储（如阿里云 OSS），用于资源文件。
- **部署**：Nginx 反向代理，Docker 容器化部署。

### 架构图

```
[用户] --> [Nginx] --> [前端: Vue 3 + Element Plus]
                            |
                        [后端: Springboot + Express]
                            |
                     [数据库: MySQL]  [文件存储: OSS]
```

## 技术选型

- **前端**：
    - Vue 3：组件化开发，支持响应式。
    - Element Plus：UI 组件库，支持自适应。
    - Axios：HTTP 请求。
- **后端**：
    - Spring + Express：轻量级框架，适合 RESTful API。
    - navicat：ORM 工具，简化数据库操作。
- **数据库**：MySQL，稳定且适合结构化数据。
- **文件存储**：阿里云 OSS，支持大文件存储和访问。
- **部署**：Docker + Nginx，确保高可用和负载均衡。

## 模块设计

### 1. 管理员模块

- **功能**：用户管理、公告管理、课程管理。
- **实现**：
    - 用户管理：展示用户列表（el-table），支持增删改查（el-form）。
    - 公告管理：发布公告（el-form），列表展示（el-table）。
    - 课程管理：创建课程（el-form），分配教师（el-select）。

### 2. 教师模块

- **功能**：点名、查看班级、发布公告、资源上传。
- **实现**：
    - 点名：选择班级和课程（el-select），标记出勤（el-checkbox）。
    - 查看班级：展示班级和学生信息（el-table）。
    - 公告发布：输入公告内容（el-form），关联课程。
    - 资源上传：文件上传（el-upload），关联课程。

### 3. 学生模块

- **功能**：在线观看、课程讨论、资源下载。
- **实现**：
    - 在线观看：视频播放（HTML5 `<video>`）。
    - 课程讨论：发帖和回复（el-card + el-input）。
    - 资源下载：点击下载（`<a>` 标签）。

### 4. 公共模块

- **用户认证**：JWT 实现登录和权限控制。
- **路由管理**：Vue Router 管理页面跳转。
- **自适应布局**：Element Plus 栅格系统 + 媒体查询。

## 数据库设计

### 表结构

- **users**：用户表（id, username, password, role, name, email, created_at）。
- **announcements**：公告表（id, title, content, publisher_id, created_at）。
- **courses**：课程表（id, name, description, teacher_id, created_at）。
- **classes**：班级表（id, name, teacher_id, created_at）。
- **class_students**：班级-学生关联表（class_id, student_id）。
- **attendance**：点名记录表（id, class_id, student_id, course_id, status, record_date, created_at）。
- **resources**：资源表（id, course_id, uploader_id, file_name, file_url, file_type, uploaded_at）。
- **discussions**：讨论表（id, course_id, user_id, content, created_at）。
- **replies**：回复表（id, discussion_id, user_id, content, created_at）。

### 关系

- 用户与公告：一对多（users.id -> announcements.publisher_id）。
- 教师与课程：一对多（users.id -> courses.teacher_id）。
- 班级与学生：多对多（通过 class_students 表关联）。
- 课程与资源：一对多（courses.id -> resources.course_id）。
- 讨论与回复：一对多（discussions.id -> replies.discussion_id）。

## 接口设计

### 1. 用户相关

- **POST /api/login**：用户登录
    - 请求：{ username, password }
    - 响应：{ token, userInfo }
- **GET /api/users**：获取用户列表（管理员）
    - 请求：{ page, pageSize }
    - 响应：{ list, total }

### 2. 公告相关

- **POST /api/announcements**：发布公告
    - 请求：{ title, content, courseId }
    - 响应：{ id, title, content }
- **GET /api/announcements**：获取公告列表
    - 请求：{ courseId, page, pageSize }
    - 响应：{ list, total }

### 3. 课程相关

- **POST /api/courses**：创建课程（管理员）
    - 请求：{ name, description, teacherId }
    - 响应：{ id, name }
- **GET /api/courses/teacher**：获取教师课程
    - 请求：{ teacherId }
    - 响应：{ list }

### 4. 点名相关

- **POST /api/attendance**：提交点名记录
    - 请求：{ classId, courseId, records: [{ studentId, status }] }
    - 响应：{ success }

### 5. 资源相关

- **POST /api/resources/upload**：上传资源
    - 请求：multipart/form-data（file, courseId）
    - 响应：{ fileUrl }
- **GET /api/resources/download/:id**：下载资源
    - 请求：{ id }
    - 响应：文件流

### 6. 讨论相关

- **POST /api/discussions**：发布帖子
    - 请求：{ courseId, content }
    - 响应：{ id, content }
- **POST /api/replies**：回复帖子
    - 请求：{ discussionId, content }
    - 响应：{ id, content }

## 系统流程

### 用户登录

1. 用户输入用户名和密码，提交登录请求。
2. 后端验证，生成 JWT，返回给前端。
3. 前端存储 token，请求携带 token 进行认证。

### 资源上传与下载

1. 教师选择文件，上传到后端。
2. 后端将文件存储到 OSS，返回 URL。
3. 学生点击下载，后端验证权限，返回文件流。

## 非功能设计

- **性能**：接口响应时间 < 500ms，页面加载时间 < 2s。
- **安全性**：JWT 认证，角色权限控制，防止越权访问。
- **扩展性**：模块化设计，接口支持扩展。

## 部署方案

- **前端**：构建后静态文件部署到 Nginx。
- **后端**：Docker 部署 Node.js 服务，连接 MySQL。
- **数据库**：MySQL 部署在独立服务器，定期备份。

## 风险与应对

1. **文件存储问题**：大文件上传可能失败。
    - 应对：限制文件大小，使用分片上传。
2. **讨论功能性能**：帖子过多可能导致加载慢。
    - 应对：分页加载，优化数据库查询。